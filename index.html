<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        document.write("Copy all the code bellow and paste it where prompted by the SpotiFree application <br><br>")
        const queryString = window.location.search;
        console.log(queryString);
        const urlParams = new URLSearchParams(queryString);
        var product = urlParams.get('code');
        document.write(product);
        
        /*
        document.write("<br><br>");
        const Http = new XMLHttpRequest();
        const url='https://localhost:8888';
        XMLHttpRequest.setRequestHeader("code", product);
        Http.open("POST", url);
        Http.send();

        Http.onreadystatechange = (e) => {
        console.log(Http.responseText)
}
*/
       const data = JSON.stringify({
            name: 'Roger',
            age: 8
        })

        const xhr = new XMLHttpRequest()
        xhr.withCredentials = true

        xhr.addEventListener('readystatechange', function() {
        if (this.readyState === this.DONE) {
            console.log(this.responseText)
            }
        })

        xhr.open('POST', 'https://localhost:8888')
        xhr.setRequestHeader('content-type', 'application/json')
        xhr.setRequestHeader('authorization', 'Bearer 123abc456def')

        xhr.send(data)
    </script>
</body>
</html>
